{"ast":null,"code":"var __values = this && this.__values || function (o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator,\n    m = s && o[s],\n    i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n    next: function next() {\n      if (o && i >= o.length) o = void 0;\n      return {\n        value: o && o[i++],\n        done: !o\n      };\n    }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n};\nimport { useRef, useEffect } from 'react';\nvar EventEmitter = /** @class */function () {\n  function EventEmitter() {\n    var _this = this;\n    this.subscriptions = new Set();\n    this.emit = function (val) {\n      var e_1, _a;\n      try {\n        for (var _b = __values(_this.subscriptions), _c = _b.next(); !_c.done; _c = _b.next()) {\n          var subscription = _c.value;\n          subscription(val);\n        }\n      } catch (e_1_1) {\n        e_1 = {\n          error: e_1_1\n        };\n      } finally {\n        try {\n          if (_c && !_c.done && (_a = _b[\"return\"])) _a.call(_b);\n        } finally {\n          if (e_1) throw e_1.error;\n        }\n      }\n    };\n    this.useSubscription = function (callback) {\n      // eslint-disable-next-line react-hooks/rules-of-hooks\n      var callbackRef = useRef();\n      callbackRef.current = callback;\n      // eslint-disable-next-line react-hooks/rules-of-hooks\n      useEffect(function () {\n        function subscription(val) {\n          if (callbackRef.current) {\n            callbackRef.current(val);\n          }\n        }\n        _this.subscriptions.add(subscription);\n        return function () {\n          _this.subscriptions[\"delete\"](subscription);\n        };\n      }, []);\n    };\n  }\n  return EventEmitter;\n}();\nexport { EventEmitter };\nexport default function useEventEmitter() {\n  var ref = useRef();\n  if (!ref.current) {\n    ref.current = new EventEmitter();\n  }\n  return ref.current;\n}","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}